(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ef9e5de"],{4064:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"address"},[s("top-nav",{attrs:{title:"地址管理"}}),s("van-address-list",{ref:"add",attrs:{list:e.addressList},on:{edit:e.editAddress,add:e.addAddress},nativeOn:{click:function(t){return e.toggleDefault(t)}},model:{value:e.chosenAddressId,callback:function(t){e.chosenAddressId=t},expression:"chosenAddressId"}}),s("van-actionsheet",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("van-address-edit",{attrs:{"area-list":e.area,"show-set-default":"","show-search-result":"","show-delete":"","show-postal":"","address-info":e.addressInfo,"save-button-text":"保存地址","delete-button-text":"取消"},on:{save:e.save}})],1),s("van-actionsheet",{attrs:{"cancel-text":"取消",actions:e.actions},on:{select:e.onSelect},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}})],1)},i=[],d=s("f499"),n=s.n(d),r=(s("ac6a"),s("bd86")),o=(s("869a"),s("6869")),l=(s("3208"),s("c0b2")),c=(s("7f7f"),s("68ef"),s("dde9"),s("e2c8"),s("2638")),u=s.n(c),h=s("a142"),f=s("ba31"),b=s("b650"),v=Object(h["j"])("radio-group"),p=v[0],m=v[1],g=p({props:{value:null,disabled:Boolean},watch:{value:function(e){this.$emit("change",e)}},render:function(e){return e("div",{class:m()},[this.slots()])}}),I=s("ad06"),w=s("7744"),S=s("0a26"),O=Object(h["j"])("radio"),j=O[0],k=O[1],D=j({mixins:[Object(S["a"])("van-radio-group",k)],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(e){(this.parent||this).$emit("input",e)}},checked:function(){return this.currentValue===this.name}},methods:{onClickIcon:function(){this.isDisabled||(this.currentValue=this.name)},onClickLabel:function(){this.isDisabled||this.labelDisabled||(this.currentValue=this.name)}}}),x=Object(h["j"])("address-item"),y=x[0],A=x[1];function L(e,t,s,a){var i=t.disabled,d=t.switchable,n=function(){return e(I["a"],{attrs:{name:"edit"},class:A("edit"),on:{click:function(e){e.stopPropagation(),Object(f["a"])(a,"edit")}}})},r=function(){var s=t.data,a=[e("div",{class:A("name")},[s.name+"，"+s.tel]),e("div",{class:A("address")},[s.address])];return t.switchable?e(D,{attrs:{name:s.id}},[a]):a},o=function(){t.switchable&&Object(f["a"])(a,"select")};return e(w["a"],u()([{class:A({disabled:i,unswitchable:!d}),attrs:{valueClass:A("value"),isLink:!i&&d},scopedSlots:{default:r,"right-icon":n},on:{click:o}},Object(f["b"])(a)]))}L.props={data:Object,disabled:Boolean,switchable:Boolean};var E=y(L),T=Object(h["j"])("address-list"),C=T[0],J=T[1],B=T[2];function N(e,t,s,a){var i=function(s,i){return s.map(function(s,d){return e(E,{attrs:{data:s,disabled:i,switchable:t.switchable&&!i},key:s.id,on:{select:function(){Object(f["a"])(a,i?"select-disabled":"select",s,d)},edit:function(){Object(f["a"])(a,i?"edit-disabled":"edit",s,d)}}})})},d=i(t.list),n=i(t.disabledList,!0);return e("div",u()([{class:J()},Object(f["b"])(a)]),[s.top&&s.top(),e(g,{attrs:{value:t.value},on:{input:function(e){Object(f["a"])(a,"input",e)}}},[d]),t.disabledText&&e("div",{class:J("disabled-text")},[t.disabledText]),n,s["default"]&&s["default"](),e(b["a"],{attrs:{square:!0,size:"large",type:"danger",text:t.addButtonText||B("add")},class:J("add"),on:{click:function(){Object(f["a"])(a,"add")}}})])}N.props={list:Array,disabledList:Array,disabledText:String,addButtonText:String,value:[String,Number],switchable:{type:Boolean,default:!0}};var V,$=C(N),z=s("5200"),M=s("a4f5"),_=s("3de1"),q={name:"Address",data:function(){return{show:!1,editShow:!1,actions:[{name:"编辑地址"},{name:"删除地址"}],addressInfo:{id:"",name:"",tel:"",province:"",city:"",county:"",addressDetail:"",areaCode:"",postalCode:"",isDefault:""},area:M["a"],chosenAddressId:"",addressList:[],userId:"",index:-1,id:-1,item:{},isEdit:-1}},components:(V={"top-nav":z["a"]},Object(r["a"])(V,$.name,$),Object(r["a"])(V,l["a"].name,l["a"]),Object(r["a"])(V,o["a"].name,o["a"]),V),created:function(){var e=this,t=localStorage.getItem("address");t=void 0==t?[]:JSON.parse(t),this.userId=JSON.parse(localStorage.getItem("userLogin")).userId,t.forEach(function(t){e.userId==t.userId&&(t.isDefault&&(e.chosenAddressId=t.id),e.addressList.push(t))})},mounted:function(){this.$refs.add.lastChild.style.zIndex=1999},methods:{editAddress:function(e,t){this.editShow=!0,this.index=t,this.id=e.id,this.item=e},addAddress:function(){this.show=!0},save:function(e){var t=localStorage.getItem("address");if(t=void 0==t?[]:JSON.parse(t),e.isDefault&&t.length>0)for(var s=0;s<t.length;s++)if(this.userId==t[s].userId&&t[s].isDefault){t[s].isDefault=!1;break}if(-1==this.isEdit){var a=new Date,i="address"+a.getTime();if(e.userId=this.userId,e.id=i,e.addTime=_["a"].format(a,"yyyy-MM-dd hh:mm:ss"),e.editTime="",e.address=e.province+e.city+e.county+e.addressDetail,t.push(e),e.isDefault)for(s=0;s<this.addressList.length;s++)if(this.addressList[s].isDefault){this.addressList[s].isDefault=!1,this.chosenAddressId=i;break}this.addressList.push(e)}else if(0==this.isEdit)for(var d=0;d<t.length;d++)if(t[d].id==e.id){for(var r in e)t[d][r]=e[r],this.item[r]=e[r];e.isDefault&&(this.chosenAddressId=e.id),this.item.address=e.province+e.city+e.county+e.addressDetail;break}for(var o in localStorage.setItem("address",n()(t)),this.show=!1,this.addressInfo)this.addressInfo[o]="";this.isEdit=-1},onSelect:function(e,t){if(0===t){for(var s in this.show=!0,this.addressInfo)this.addressInfo[s]=this.item[s];this.isEdit=t}else if(1===t){this.addressList.splice(this.index,1);for(var a=JSON.parse(localStorage.getItem("address")),i=0;i<a.length;i++)if(a[i].id==this.id){a.splice(i,1);break}localStorage.setItem("address",n()(a)),this.isEdit=1}this.editShow=!1},toggleDefault:function(){for(var e=JSON.parse(localStorage.getItem("address")),t=0;t<e.length;t++)if(this.userId==e[t].userId&&e[t].isDefault){e[t].isDefault=!1;break}for(var s=0;s<e.length;s++)if(this.chosenAddressId==e[s].id){e[s].isDefault=!0;break}localStorage.setItem("address",n()(e))}}},P=q,F=s("2877"),G=Object(F["a"])(P,a,i,!1,null,"00a0c69e",null);t["default"]=G.exports},dde9:function(e,t,s){},e2c8:function(e,t,s){}}]);
//# sourceMappingURL=chunk-5ef9e5de.2464ee0f.js.map