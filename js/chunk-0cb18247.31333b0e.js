(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cb18247"],{"055c":function(t,r,e){"use strict";var s=e("a77d"),o=e.n(s);o.a},"11e9":function(t,r,e){var s=e("52a7"),o=e("4630"),c=e("6821"),a=e("6a99"),n=e("69a8"),i=e("c69a"),u=Object.getOwnPropertyDescriptor;r.f=e("9e1e")?u:function(t,r){if(t=c(t),r=a(r,!0),i)try{return u(t,r)}catch(e){}if(n(t,r))return o(!s.f.call(t,r),t[r])}},"3b2b":function(t,r,e){var s=e("7726"),o=e("5dbc"),c=e("86cc").f,a=e("9093").f,n=e("aae3"),i=e("0bfb"),u=s.RegExp,f=u,h=u.prototype,d=/a/g,l=/a/g,p=new u(d)!==d;if(e("9e1e")&&(!p||e("79e5")(function(){return l[e("2b4c")("match")]=!1,u(d)!=d||u(l)==l||"/a/i"!=u(d,"i")}))){u=function(t,r){var e=this instanceof u,s=n(t),c=void 0===r;return!e&&s&&t.constructor===u&&c?t:o(p?new f(s&&!c?t.source:t,r):f((s=t instanceof u)?t.source:t,s&&c?i.call(t):r),e?this:h,u)};for(var y=function(t){t in u||c(u,t,{configurable:!0,get:function(){return f[t]},set:function(r){f[t]=r}})},v=a(f),g=0;v.length>g;)y(v[g++]);h.constructor=u,u.prototype=h,e("2aba")(s,"RegExp",u)}e("7a56")("RegExp")},"5dbc":function(t,r,e){var s=e("d3f4"),o=e("8b97").set;t.exports=function(t,r,e){var c,a=r.constructor;return a!==e&&"function"==typeof a&&(c=a.prototype)!==e.prototype&&s(c)&&o&&o(t,c),t}},"8b97":function(t,r,e){var s=e("d3f4"),o=e("cb7c"),c=function(t,r){if(o(t),!s(r)&&null!==r)throw TypeError(r+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,s){try{s=e("9b43")(Function.call,e("11e9").f(Object.prototype,"__proto__").set,2),s(t,[]),r=!(t instanceof Array)}catch(o){r=!0}return function(t,e){return c(t,e),r?t.__proto__=e:s(t,e),t}}({},!1):void 0),check:c}},9093:function(t,r,e){var s=e("ce10"),o=e("e11e").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(t){return s(t,o)}},a21f:function(t,r,e){var s=e("584a"),o=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},a77d:function(t,r,e){},aae3:function(t,r,e){var s=e("d3f4"),o=e("2d95"),c=e("2b4c")("match");t.exports=function(t){var r;return s(t)&&(void 0!==(r=t[c])?!!r:"RegExp"==o(t))}},c106:function(t,r,e){"use strict";e.r(r);var s=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"search"},[e("form",[e("van-search",{ref:"search",attrs:{placeholder:"输入商品关键字","show-action":"",background:"#1989FA"},on:{focus:t.focusFn},model:{value:t.keyWord,callback:function(r){t.keyWord=r},expression:"keyWord"}},[e("div",{attrs:{slot:"action"},on:{click:t.search},slot:"action"},[t._v("搜索")])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isFocus,expression:"isFocus"}],staticClass:"tags"},[e("p",[t._v("搜索历史")]),e("ul",{staticClass:"tag-row clearfix"},t._l(t.searchHistory[t.userId],function(r,s){return e("li",{key:s,staticClass:"tag-col fl",on:{click:function(e){return t.searchForTag(r)}}},[t._v(t._s(r))])}),0)]),e("div",{staticClass:"product-data"},[e("van-row",t._l(t.searchProducts,function(r,s){return e("van-col",{key:s,ref:"van"+s,refInFor:!0,staticClass:"col-box",attrs:{span:"12"},nativeOn:{click:function(e){return t.goState({name:"Detail",params:{pid:r.id},query:{active:1}})}}},[e("div",[e("img",{staticClass:"auto-img",attrs:{src:r.images.small}})]),e("div",{staticClass:"product-info"},[e("p",{staticClass:"title"},[t._v(t._s(r.name))]),e("p",{staticClass:"price"},[t._v(t._s(r.price)+"元")])])])}),1)],1)])},o=[],c=e("f499"),a=e.n(c),n=(e("ac6a"),e("3b2b"),e("bd86")),i=(e("7f7f"),e("5852"),e("d961")),u=(e("386d"),{name:"Search",data:function(){return{keyWord:"手机",searchProducts:[],searchHistory:{},userId:"",isFocus:!0}},created:function(){this.userId=JSON.parse(localStorage.getItem("userLogin")).userId;var t=localStorage.getItem("searchHistory");this.searchHistory=void 0==t?{}:JSON.parse(t)},mounted:function(){var t=this.$refs.search.querySelector("input");t.focus()},components:Object(n["a"])({},i["a"].name,i["a"]),methods:{goState:function(t){this.$router.push(t)},search:function(){var t=this;if(this.isFocus=!1,""!=this.keyWord&&void 0!=this.keyWord){this.searchProducts=[];var r=new RegExp("("+this.keyWord+")","img"),e=JSON.parse(localStorage.getItem("products")).products;e.forEach(function(e){r.test(e.name)&&t.searchProducts.push(e)}),this.searchHistory[this.userId]?this.searchHistory[this.userId].length>=10&&this.searchHistory[this.userId].shift():this.searchHistory[this.userId]=[],-1===this.searchHistory[this.userId].indexOf(this.keyWord)&&(this.searchHistory[this.userId].push(this.keyWord),localStorage.setItem("searchHistory",a()(this.searchHistory)))}else this.$toast("搜索关键不能为空")},focusFn:function(){this.isFocus=!0},searchForTag:function(t){this.keyWord=t,this.search()}}}),f=u,h=(e("055c"),e("2877")),d=Object(h["a"])(f,s,o,!1,null,"098f99c2",null);r["default"]=d.exports},f499:function(t,r,e){t.exports=e("a21f")}}]);
//# sourceMappingURL=chunk-0cb18247.31333b0e.js.map